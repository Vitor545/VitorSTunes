(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(22),s=n.n(c),i=(n(30),n(14)),u=n(4),o=n(5),l=n(9),d=n(6),h=n(7),b=n(15),j=n(2),p=n(0),m=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"loading",children:[Object(p.jsx)("span",{}),Object(p.jsx)("span",{}),Object(p.jsx)("span",{}),Object(p.jsx)("span",{})]})}}]),n}(a.Component),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleChange,n=e.isButtonDisable,a=e.onClickButton,r=e.loading;return e.irSearch?Object(p.jsx)(j.a,{to:"/search"}):r?Object(p.jsx)(m,{}):Object(p.jsxs)("div",{"data-testid":"page-login",className:"contanner-login",children:[Object(p.jsx)("p",{className:"vs",children:"VS TUNES"}),Object(p.jsx)("label",{htmlFor:"login-name-input",children:Object(p.jsx)("input",{type:"text",id:"login-name-input",onChange:t,"data-testid":"login-name-input",placeholder:"Digite seu nome"})}),Object(p.jsx)("button",{type:"button","data-testid":"login-submit-button",disabled:n,onClick:a,children:"Entrar"})]})}}]),n}(a.Component),f=n(10),v=n(3),x=n.n(v),g=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.userName;return Object(p.jsx)(r.a.Fragment,{children:Object(p.jsxs)("header",{className:"header-component","data-testid":"header-component",children:[Object(p.jsx)("p",{"data-testid":"header-user-name",children:e.name}),Object(p.jsx)(b.b,{to:"/search","data-testid":"link-to-search",children:"Search"})]})})}}]),n}(a.Component),k=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,a,r,c,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=k,S="user",N=function(e){return localStorage.setItem(S,JSON.stringify(e))},C=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},w=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(S));null===t&&(t={}),C(t)(e)}))},M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.albumApi;return Object(p.jsx)("div",{className:"group-class",children:e.map((function(e){return Object(p.jsx)(b.b,{to:"/album/".concat(e.collectionId),"data-testid":"link-to-album-".concat(e.collectionId),children:Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{src:e.artworkUrl100,alt:e.collectionId}),Object(p.jsx)("p",{children:e.collectionName}),Object(p.jsx)("p",{children:e.artistName})]})},e.collectionId)}))})}}]),n}(a.Component),I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={banda:"",bandasave2:"",albumApi:[],isButtonDSearch:!0,loading:!0,userName:"",bandaRecomendacion:""},e.handleChange=e.handleChange.bind(Object(l.a)(e)),e.buttonSearch=e.buttonSearch.bind(Object(l.a)(e)),e.checkButtonSearch=e.checkButtonSearch.bind(Object(l.a)(e)),e.geraMusica=e.geraMusica.bind(Object(l.a)(e)),e.getRecomendacion=e.getRecomendacion.bind(Object(l.a)(e)),e.geraMusicaRecom=e.geraMusicaRecom.bind(Object(l.a)(e)),e}return Object(o.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target.value;this.setState({banda:n},(function(){return t.checkButtonSearch()}))}},{key:"getsearchAlbumsAPI",value:function(){var e=Object(f.a)(x.a.mark((function e(){var t,n,a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.banda,e.next=3,y(t);case 3:n=e.sent,this.setState({albumApi:n},(function(){return a.setState({loading:!1,banda:""})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getRecomendacion(),this.recuperaUser()}},{key:"getRecomendacion",value:function(){var e=Object(f.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("eminem");case 2:t=e.sent,this.setState({bandaRecomendacion:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"geraMusicaRecom",value:function(e){return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)("p",{children:"M\xfasicas Recomendadas"}),Object(p.jsx)(M,{albumApi:e})]})}},{key:"recuperaUser",value:function(){var e=Object(f.a)(x.a.mark((function e(){var t,n=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,this.setState({userName:t},(function(){return n.setState({loading:!1})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buttonSearch",value:function(){var e=this,t=this.state.banda;this.setState({loading:!0,bandasave2:t},(function(){return e.getsearchAlbumsAPI()}))}},{key:"checkButtonSearch",value:function(){this.state.banda.length>=Number("2")&&this.setState({isButtonDSearch:!1})}},{key:"geraMusica",value:function(e,t){return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(e)}),Object(p.jsx)(M,{albumApi:t})]})}},{key:"render",value:function(){var e=this.state,t=e.isButtonDSearch,n=e.bandasave2,a=e.albumApi,r=e.loading,c=e.userName,s=e.bandaRecomendacion;return r?Object(p.jsx)(m,{}):Object(p.jsxs)("div",{className:"page-search","data-testid":"page-search",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)(g,{userName:c}),Object(p.jsxs)("div",{className:"barraBusca",children:[Object(p.jsx)("label",{htmlFor:"search-artist-input",children:Object(p.jsx)("input",{type:"text","data-testid":"search-artist-input",id:"search-artist-input",onChange:this.handleChange,placeholder:"Digite a banda"})}),Object(p.jsx)("button",{type:"button","data-testid":"search-artist-button",onClick:this.buttonSearch,disabled:t,children:"Pesquisar"})]})]}),Object(p.jsx)("div",{className:"musicas-contaneir",children:0===a.length?this.geraMusicaRecom(s):this.geraMusica(n,a)})]})}}]),n}(a.Component),B=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=B,D=n(25),R="favorite_songs";JSON.parse(localStorage.getItem(R))||localStorage.setItem(R,JSON.stringify([]));var U=function(){return JSON.parse(localStorage.getItem(R))},P=function(e){return localStorage.setItem(R,JSON.stringify(e))},F=function(e){return function(t){setTimeout((function(){t(e)}),500)}},J=function(e){return new Promise((function(t){if(e){var n=U();P([].concat(Object(D.a)(n),[e]))}F("OK")(t)}))},E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={checked:!1,music:[],favorite:!1},a.getMusicFavorita=a.getMusicFavorita.bind(Object(l.a)(a)),a.setStateMusic=a.setStateMusic.bind(Object(l.a)(a)),a.trackMeu=a.trackMeu.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.trackMeu;this.trackMeu(e)}},{key:"trackMeu",value:function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:n=e.sent,console.log(n),this.setState({music:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMusicFavorita",value:function(){var e=Object(f.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a=n.name,this.setStateMusic(a);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setStateMusic",value:function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.checked,e.next=3,J(t);case 3:return n?this.setState({checked:!1}):this.setState({checked:!0}),e.next=6,new Promise((function(e){var t=U();F(t)(e)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.previewUrl,n=e.trackName;e.trackId,e.saveId,e.trackMeu,this.state.checked;return Object(p.jsxs)("div",{className:"music-card",children:[Object(p.jsx)("p",{children:n}),Object(p.jsxs)("audio",{"data-testid":"audio-component",src:t,controls:!0,children:[Object(p.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(p.jsx)("code",{children:"audio"}),"."]})]})}}]),n}(a.Component),T=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={loading:!0,musicAlbum:[],saveId:"",userName:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getMusicAlbum(e),this.recuperaUser()}},{key:"recuperaUser",value:function(){var e=Object(f.a)(x.a.mark((function e(){var t,n=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,this.setState({userName:t},(function(){return n.setState({loading:!1})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMusicAlbum",value:function(){var e=Object(f.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:n=e.sent,this.setState({musicAlbum:n,saveId:t});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.musicAlbum,n=e.loading,a=e.saveId,r=e.userName;return Object(p.jsx)("div",{"data-testid":"page-album",children:n?Object(p.jsx)(m,{}):Object(p.jsxs)("div",{className:"album-id",children:[Object(p.jsx)("header",{className:"header",children:Object(p.jsx)(g,{userName:r})}),Object(p.jsxs)("div",{className:"title-grid",children:[Object(p.jsx)("h1",{"data-testid":"artist-name",children:t[0].artistName}),Object(p.jsx)("p",{"data-testid":"album-name",children:t[0].collectionName})]}),Object(p.jsx)("div",{className:"music-grid",children:t.slice(1).map((function(e){var t=e.trackName,n=e.previewUrl,r=e.trackId;return Object(p.jsx)(E,{trackName:t,previewUrl:n,trackId:r,saveId:a},t)}))})]})})}}]),n}(a.Component);T.defaultProps={match:{params:{id:"Nenhum album selecionado"}}};a.Component,a.Component,a.Component;var K=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"notfound","data-testid":"page-not-found",children:[Object(p.jsx)("h1",{children:"NotFound"}),Object(p.jsx)(b.b,{to:"/search","data-testid":"link-to-search",children:"HOME"})]})}}]),n}(a.Component),q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={userName:"",isButtonDisable:!0,loading:!1,irSearch:!1},a.handleChange=a.handleChange.bind(Object(l.a)(a)),a.checkButton=a.checkButton.bind(Object(l.a)(a)),a.onClickButton=a.onClickButton.bind(Object(l.a)(a)),a}return Object(o.a)(n,[{key:"handleChange",value:function(e){var t=this,n=e.target.value;this.setState({userName:n},(function(){return t.checkButton()}))}},{key:"onClickButton",value:function(){var e=this,t=this.state.userName;this.setState({loading:!0},(function(){return(n={name:t},new Promise((function(e){N(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),n)),C("OK")(e)}))).then((function(){return e.setState({loading:!1,irSearch:!0})}));var n}))}},{key:"checkButton",value:function(){this.state.userName.length>=Number("3")&&this.setState({isButtonDisable:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isButtonDisable,a=t.loading,r=t.irSearch;return Object(p.jsx)(b.a,{children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/",render:function(t){return Object(p.jsx)(O,Object(i.a)(Object(i.a)({},t),{},{handleChange:e.handleChange,isButtonDisable:n,onClickButton:e.onClickButton,loading:a,irSearch:r}))}}),Object(p.jsx)(j.b,{exact:!0,path:"/album/:id",render:function(e){return Object(p.jsx)(T,Object(i.a)({},e))}}),Object(p.jsx)(j.b,{exact:!0,path:"/favorites",render:function(e){return Object(p.jsx)(K,Object(i.a)({},e))}}),Object(p.jsx)(j.b,{exact:!0,path:"/profile",render:function(e){return Object(p.jsx)(K,Object(i.a)({},e))}}),Object(p.jsx)(j.b,{path:"/profile/edit",render:function(e){return Object(p.jsx)(K,Object(i.a)({},e))}}),Object(p.jsx)(j.b,{exact:!0,path:"/search",render:function(e){return Object(p.jsx)(I,Object(i.a)({},e))}}),Object(p.jsx)(j.b,{exact:!0,render:function(e){return Object(p.jsx)(K,Object(i.a)({},e))}})]})})}}]),n}(r.a.Component);s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.ed3d9432.chunk.js.map